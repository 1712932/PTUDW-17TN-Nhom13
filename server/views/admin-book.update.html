{% extends "admin-layout.html" %}

{% block breadcrumb %}
<div class="col-lg-10">
  <h2>Quản lý sách</h2>
  <ol class="breadcrumb">
    <li>
      <a href="/admin">Home</a>
    </li>
    <li>
      <a href="/admin/book">Quản lý sách</a>
    </li>
    <li class="active">
      <strong>Chỉnh sửa thông tin</strong>
    </li>
  </ol>
</div>
{% endblock %}

{% block style %}
<style>
  .img-container,
  .img-preview {
    overflow: hidden;
    text-align: center;
    width: 100%;
  }

  .img-preview-sm {
    height: 130px;
    width: 200px;
  }
</style>
{% endblock %}

{% block body %}
<div class="row">
  <div class="col-lg-12">
    <div class="ibox ">
      <div class="ibox-title">
        <h5>Chỉnh sửa thông tin</h5>
        <div class="ibox-tools">
          <a class="collapse-link">
            <i class="fa fa-chevron-up"></i>
          </a>
          <a class="close-link">
            <i class="fa fa-times"></i>
          </a>
        </div>
      </div>
      <div class="ibox-content">
        <form id="staff-form">
          <div class="form-group row" id="staff-id-div">
            <label class="col-sm-2 col-form-label">Tên sách</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" required>
              <span class="form-text m-b-none" id="id-err" style="color: red" hidden></span>
            </div>
          </div>
          <div class="hr-line-dashed"></div>
          <div class="form-group row">
            <label class="col-sm-2 col-form-label">Tác giả</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" name="HT" required>
            </div>
          </div>
          <div class="hr-line-dashed"></div>
          <div class="form-group row">
            <label class="col-sm-2 col-form-label">Ngôn ngữ</label>
            <div class="col-sm-10">
              <select class="form-control m-b" name="MSPB" id="dept-list">
                <option>Tiếng Việt</option>
                <option>Tiếng Anh</option>
                <option>Tiếng Đức</option>
              </select>
            </div>
          </div>
          <div class="hr-line-dashed"></div>
          <div class="form-group row">
            <label class="col-sm-2 col-form-label">Nhà xuất bản</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" name="HT" required>
            </div>
          </div>
          <div class="hr-line-dashed"></div>
          <div class="form-group row">
            <label class="col-sm-2 col-form-label">Ngày xuất bản</label>
            <div class="col-sm-10">
              <div class="input-group date">
                <span class="input-group-addon"><i class="fa fa-calendar"></i></span><input type="text"
                  class="form-control" value="27/04/2020">
              </div>
            </div>
          </div>
          <div class="hr-line-dashed"></div>
          <div class="form-group row">
            <label class="col-sm-2 col-form-label">Số lượng</label>
            <div class="col-sm-10">
              <input type="number" class="form-control" name="HT" required value="1">
            </div>
          </div>
          <div class="hr-line-dashed"></div>
          <div class="form-group row">
            <label class="col-sm-2 col-form-label">Mô tả sách</label>
            <div class="col-sm-10">
              <textarea class="form-control" required rows="20"></textarea>
            </div>
          </div>
          <div class="hr-line-dashed"></div>
          <div class="form-group row">
            <label class="col-sm-2 col-form-label">Hình ảnh minh họa</label>
            <div class="col-sm-10">
              <div class="col-md-6">
                <div class="image-crop">
                  <img src="data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==">
                </div>
              </div>
              <div class="col-md-6">
                <h4>Preview image</h4>
                <div class="img-preview img-preview-sm"></div>
                <div>
                  <label title="Upload image file" for="inputImage" class="btn btn-primary">
                    <input type="file" accept="image/*" name="file" id="inputImage" style="display:none">
                    Upload image
                  </label>
                </div>
                <br>
                <h4>Modify image</h4>
                <div class="btn-group">
                  <button class="btn btn-white" id="zoomIn" type="button">Zoom In</button>
                  <button class="btn btn-white" id="zoomOut" type="button">Zoom Out</button>
                  <button class="btn btn-white" id="rotateLeft" type="button">Rotate Left</button>
                  <button class="btn btn-white" id="rotateRight" type="button">Rotate Right</button>
                  <button class="btn btn-warning" id="setDrag" type="button">New crop</button>
                </div>
              </div>
            </div>
          </div>
          <div class="hr-line-dashed"></div>
          <div class="form-group row">
            <div class="col-sm-4 col-sm-offset-2">
              <button class="btn btn-white btn-sm" id="cancel-btn">Cancel</button>
              <button class="btn btn-primary btn-sm" type="submit">Create</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  $(document).ready(() => {
    $('.input-group.date').datepicker({
      todayBtn: "linked",
      keyboardNavigation: false,
      forceParse: false,
      calendarWeeks: true,
      autoclose: true
    });
    var $image = $(".image-crop > img");
    var $cropped = $($image).cropper({
      aspectRatio: 1.618,
      preview: ".img-preview",
      done: function(data) {
        // Output the result data for cropping image.
      }
    });

    var $inputImage = $("#inputImage");
    if (window.FileReader) {
      $inputImage.change(function() {
        var fileReader = new FileReader(),
          files = this.files,
          file;

        if (!files.length) {
          return;
        }

        file = files[0];

        if (/^image\/\w+$/.test(file.type)) {
          fileReader.readAsDataURL(file);
          fileReader.onload = function() {
            $inputImage.val("");
            $image.cropper("reset", true).cropper("replace", this.result);
          };
        } else {
          showMessage("Please choose an image file.");
        }
      });
    } else {
      $inputImage.addClass("hide");
    }

    $("#zoomIn").click(function() {
      $image.cropper("zoom", 0.1);
    });

    $("#zoomOut").click(function() {
      $image.cropper("zoom", -0.1);
    });

    $("#rotateLeft").click(function() {
      $image.cropper("rotate", 45);
    });

    $("#rotateRight").click(function() {
      $image.cropper("rotate", -45);
    });

    $("#setDrag").click(function() {
      $image.cropper("setDragMode", "crop");
    });
  });
</script>
{% endblock %}